require=function n(e,t,a){function i(l,r){if(!t[l]){if(!e[l]){var c="function"==typeof require&&require;if(!r&&c)return c(l,!0);if(o)return o(l,!0);var s=new Error("Cannot find module '"+l+"'");throw s.code="MODULE_NOT_FOUND",s}var h=t[l]={exports:{}};e[l][0].call(h.exports,function(n){var t=e[l][1][n];return i(t?t:n)},h,h.exports,n,e,t,a)}return t[l].exports}for(var o="function"==typeof require&&require,l=0;l<a.length;l++)i(a[l]);return i}({NewScript:[function(n,e,t){"use strict";cc._RFpush(e,"f5f4d+69stA7LN0lFAovI6t","NewScript"),cc.Class({"extends":cc.Component,properties:{},onLoad:function(){cc.director.preloadScene("New Scene"),cc.log("Scene ok")},change:function(){cc.director.loadScene("New Scene")}}),cc._RFpop()},{}],blank:[function(n,e,t){"use strict";cc._RFpush(e,"0bdaarwLZZP15CHVwr6ExzE","blank"),cc.Class({"extends":cc.Component,properties:{_cliclStartEvent:null,_spriteFrameArr:[],_selfI:0,_selfJ:0,_type:0,_fallDownNum:0,_moveLeftNum:0},onLoad:function(){var n=this;this._cliclStartEvent=this.node.on(cc.Node.EventType.TOUCH_START,function(){var e=cc.find("script");e.emit(GameConfig.event.clickBlank,n.node)})},init:function(n,e,t){this._spriteFrameArr=n,this._type=~~(Math.random()*GameConfig.blank_type),this.getComponent(cc.Sprite).spriteFrame=this._spriteFrameArr[this._type],this._selfI=e,this._selfJ=t},showInfo:function(){return{i:this._selfI,j:this._selfJ,type:this._type}},blankIfClick:function(n,e){n?this.node.getComponent(cc.Sprite).spriteFrame=this._spriteFrameArr[e]:this.node.getComponent(cc.Sprite).spriteFrame=this._spriteFrameArr[e]},moveCartoon:function(n){this.node.runAction(cc.moveTo(.4,cc.p(n)))},changeLabel:function(n,e,t){this._selfI=n,this._selfJ=e,this._type=t},setFallDownNum:function(n){this._fallDownNum=n},startFallDown:function(){return this._selfJ-=this._fallDownNum,this.node.runAction(cc.moveBy(.55,cc.p(0,-this._fallDownNum*GameConfig.blank_width))),this._fallDownNum},randomColor:function(){this._type=~~(Math.random()*GameConfig.blank_type),this.getComponent(cc.Sprite).spriteFrame=this._spriteFrameArr[this._type]},clickClose:function(n){n?this.node.off(cc.Node.EventType.TOUCH_START,this._cliclStartEvent):this.node.on(cc.Node.EventType.TOUCH_START,this._cliclStartEvent)}}),cc._RFpop()},{}],game:[function(n,e,t){"use strict";cc._RFpush(e,"322a2xhVW5LGqZLNQbXkxUf","game"),window.GameConfig={blank_w:10,blank_h:10,blank_type:7,startPx:-200,startPy:-200,blank_width:40,event:{clickBlank:"click_Blank"},_checkSameArr:[]},cc.Class({"extends":cc.Component,properties:{countNum:90,_score:0,_count:0,_clickTrade:null,blankCo:[cc.SpriteFrame],_blankArr:[],blank_prefab:cc.Prefab},onLoad:function(){cc.director.preloadScene("start"),cc.director.preloadScene("New Scene");var n=cc.find("Canvas/img_222");n.active=!1;var e=cc.find("Canvas/img_222/false");e.active=!1;var t=cc.find("Canvas/img_222/succes");t.active=!1,this._blankArr=[];for(var a=0;a<GameConfig.blank_w;a++){for(var i=[],o=0;o<GameConfig.blank_h;o++)i.push(null);this._blankArr.push(i)}this.buildRandom(),this.getDifBlank(),this.time();var l=this;this.node.on(GameConfig.event.clickBlank,function(n){var e=n.getUserData();l.exchangeClick(e),cc.log("data",e.getComponent("blank").showInfo().type)})},buildRandom:function(){for(var n=cc.find("Canvas/blanks"),e=0;e<GameConfig.blank_w;e++)for(var t=0;t<GameConfig.blank_h;t++){var a=cc.instantiate(this.blank_prefab);a.x=GameConfig.blank_width*e+GameConfig.startPx,a.y=GameConfig.blank_width*t+GameConfig.startPy,n.addChild(a),a.getComponent("blank").init(this.blankCo,e,t),this._blankArr[e][t]=a}},getDifBlank:function(){for(var n=0;n<GameConfig.blank_w;n++)for(var e=0;e<GameConfig.blank_h;e++)e<GameConfig.blank_h-2&&this._blankArr[n][e].getComponent("blank").showInfo().type==this._blankArr[n][e+1].getComponent("blank").showInfo().type&&this._blankArr[n][e+1].getComponent("blank").showInfo().type==this._blankArr[n][e+2].getComponent("blank").showInfo().type&&(this._blankArr[n][e].getComponent("blank").randomColor(),this.getDifBlank()),n<GameConfig.blank_w-2&&this._blankArr[n][e].getComponent("blank").showInfo().type==this._blankArr[n+1][e].getComponent("blank").showInfo().type&&this._blankArr[n+1][e].getComponent("blank").showInfo().type==this._blankArr[n+2][e].getComponent("blank").showInfo().type&&(this._blankArr[n][e].getComponent("blank").randomColor(),this.getDifBlank())},exchangeClick:function(n){if(null==this._clickTrade)n.getComponent("blank").blankIfClick(!0,7),this._clickTrade=n;else{for(var e=[cc.p(0,-1),cc.p(0,1),cc.p(1,0),cc.p(-1,0)],t=n.getComponent("blank").showInfo(),a=cc.p(t.i,t.j),i=0;i<e.length;i++){var o=e[i],l=cc.pAdd(o,a);if(l.x==this._clickTrade.getComponent("blank").showInfo().i&&l.y==this._clickTrade.getComponent("blank").showInfo().j)return this._clickTrade.getComponent("blank").blankIfClick(!1,this._clickTrade.getComponent("blank").showInfo().type),this.exchangeCloseClick(),this.exchangeLocation(this._clickTrade,n,!0),void(this._clickTrade=null)}this._clickTrade==n?(this._clickTrade.getComponent("blank").blankIfClick(!1,this._clickTrade.getComponent("blank").showInfo().type),this._clickTrade=null):(this._clickTrade.getComponent("blank").blankIfClick(!1,this._clickTrade.getComponent("blank").showInfo().type),n.getComponent("blank").blankIfClick(!0,7),this._clickTrade=n)}},exchangeLocation:function(n,e,t){var a=e;e.getComponent("blank").moveCartoon(n.getPosition()),n.getComponent("blank").moveCartoon(a.getPosition());var i=n.getComponent("blank").showInfo(),o=e.getComponent("blank").showInfo();this._blankArr[o.i][o.j]=n,this._blankArr[o.i][o.j].getComponent("blank").changeLabel(o.i,o.j,i.type),this._blankArr[i.i][i.j]=a,this._blankArr[i.i][i.j].getComponent("blank").changeLabel(i.i,i.j,o.type),1==t&&(this._count=0,this.checkSame(this._blankArr[o.i][o.j],this._blankArr[i.i][i.j]))},filterDelSame:function(n,e){for(var t=n.concat(e),a=0;a<t.length;a++)for(var i=t[a],o=a+1;o<t.length;o++)cc.pSameAs(t[o],i)&&(t.splice(o,1),o--);0==t.length?this.scheduleOnce(function(){this.exchangeOpenClick()},.55):this.scheduleOnce(function(){this.deleteBlank(t)},.55)},deleteBlank:function(n){var e=n,t=n.length;this._score+=t;var a=this;if(this.node.getChildByName("label").getComponent(cc.Label).string="score:"+this._score,this._score>=100&&this.countNum>=0){a.exchangeCloseClick();var i=cc.find("Canvas/img_222");i.active=!0,i.getChildByName("succes").active=!0,this.node.getChildByName("label").active=!1,this.node.getChildByName("time label").active=!1,this.node.getChildByName("score label").active=!1,a.scheduleOnce(function(){a.replay()},4)}for(var o=0;o<e.length;o++){var i=e[o];i.removeFromParent(!0);var l=i.getComponent("blank").showInfo();this._blankArr[l.i][l.j]=null}for(var o=0;o<GameConfig.blank_w;o++)for(var r=0;r<GameConfig.blank_h;r++){var c=this._blankArr[o][r];if(c){if(this._fallDownNum=0,r>0)for(var s=r-1;s>=0;s--)null==this._blankArr[o][s]&&this._fallDownNum++;c.getComponent("blank").setFallDownNum(this._fallDownNum)}}for(var o=0;o<GameConfig.blank_w;o++)for(var r=0;r<GameConfig.blank_h;r++){var h=this._blankArr[o][r];if(h){var f=h.getComponent("blank").startFallDown(),t=this._blankArr[o][r];this._blankArr[o][r]=this._blankArr[o][r-f],this._blankArr[o][r-f]=t}}this.scheduleOnce(function(){this.fillBlank()},.55)},fillBlank:function(){for(var n=cc.find("Canvas/blanks"),e=0;e<GameConfig.blank_w;e++)for(var t=0;t<GameConfig.blank_h;t++)if(null==this._blankArr[e][t]){var a=cc.instantiate(this.blank_prefab);a.x=GameConfig.blank_width*e+GameConfig.startPx,a.y=GameConfig.blank_width*t+GameConfig.startPy,a.getComponent("blank").init(this.blankCo,e,t),n.addChild(a),this._blankArr[e][t]=a}this.checkSame()},checkSame:function(n,e){for(var t=[],a=[],i=0;i<GameConfig.blank_w;i++)for(var o=0;o<GameConfig.blank_h;o++)o<GameConfig.blank_h-2&&this._blankArr[i][o].getComponent("blank").showInfo().type==this._blankArr[i][o+1].getComponent("blank").showInfo().type&&this._blankArr[i][o+1].getComponent("blank").showInfo().type==this._blankArr[i][o+2].getComponent("blank").showInfo().type&&t.push(this._blankArr[i][o],this._blankArr[i][o+1],this._blankArr[i][o+2]),i<GameConfig.blank_w-2&&this._blankArr[i][o].getComponent("blank").showInfo().type==this._blankArr[i+1][o].getComponent("blank").showInfo().type&&this._blankArr[i+1][o].getComponent("blank").showInfo().type==this._blankArr[i+2][o].getComponent("blank").showInfo().type&&a.push(this._blankArr[i][o],this._blankArr[i+1][o],this._blankArr[i+2][o]);this.filterDelSame(t,a),this._count++,cc.log("this._count",this._count),0==t.length&&0==a.length&&1==this._count&&this.scheduleOnce(function(){this.exchangeLocation(n,e,!1)},.55)},exchangeCloseClick:function(){for(var n=0;n<GameConfig.blank_w;n++)for(var e=0;e<GameConfig.blank_h;e++){var t=this._blankArr[n][e];t.getComponent("blank").clickClose(!0)}},exchangeOpenClick:function(){for(var n=0;n<GameConfig.blank_w;n++)for(var e=0;e<GameConfig.blank_h;e++){var t=this._blankArr[n][e];t.getComponent("blank").clickClose(!1)}},exchange:function(){cc.director.loadScene("start")},replay:function(){cc.director.loadScene("New Scene")},time:function(){this.schedule(function(){if(0==this.countNum&&this._score<100){var n=cc.find("Canvas/img_222");n.active=!0,this.node.getChildByName("time label").active=!1,this.node.getChildByName("label").active=!1,this.node.getChildByName("score label").active=!1;var e=cc.find("Canvas/img_222/false");e.active=!0,this.scheduleOnce(function(){this.replay()},4)}this.countNum--,this.node.getChildByName("time label").getComponent(cc.Label).string="time:"+this.countNum},1)}}),cc._RFpop()},{}]},{},["NewScript","blank","game"]);